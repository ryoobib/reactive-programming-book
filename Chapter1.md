# Part 01 리액티브 프로그래밍

## Chapter 01 리액티브 시스템과 리액티브 프로그래밍

리액티브란 무엇을 의미할까?

사전적 의미로는 "반응을 하는"이라는 뜻이 있다. 어떠한 이벤트나 상황이 발생했을 때, 반응을 해서 그에 따라 적절하게 행동하는 것을 의미한다.
책에서 소개하는 예시를 보면, 학교나 동호회, 회사 같은 단체에서 다양한 사람들과 생활을 하다 보면 유독 사교성이 좋은 사람이 있다. 이 사람의 특징을 보면, 대개 다른 사람의 이야기를 잘 경청하고 상대방의 대화에 맞장구를 잘 쳐준다. 이렇게 상대방에 맞추어 적절하게 반응을 잘하는 사람에게 리액션이 좋다고 표현한다. 리액티브 시스템 역시 **반응을 잘 하는 시스템**이라고 보면 된다. 

시스템에서 반응을 잘한다는 의미는 무엇일까? 클라이언트의 요청에 즉각 응답을 해주는 것을 의미한다. 즉 지연 시간을 최소화한다고도 볼 수 있다. 
이러한 시스템을 구축하는 방법에 대해 알아보자.

리액티브 선언문으로 리액티브 시스템 이해하기

리액티브 선언문은 리액티브 시스템 구축을 위한 일종의 설계 원칙이자 리액티브 시스템의 특징이라고 할 수 있다.

리액티브 설계 원칙은 크게 3개의 영역으로 나누어 정의할 수 있다.

* MEANS ( 방법 )

리액티브 시스템에서 주된 통신 수단으로 무엇을 사용할 것인지에 대한 표현이다. 비동기 메시지 기반의 통신을 통해서 구성요소들 간의 느슨한 결합, 격리성, 위치 투명성을 보장한다. 

* FORM ( 형태 )

메시지 기반 통신을 통해서 어떠한 형태를 지니는 시스템으로 형성되는 지를 나타낸다. 리액티브 시스템은 비동기 메시지 통신 기반하에 탄력성과 회복성을 가지는 시스템이어야 한다.

    리액티브 시스템에서 "탄력성" 이란 시스템의 작업량이 변화하더라도 일정한 응답을 유지하는 것을 의미한다. 즉, 시스템으로 유입되는 입력의 양에 구애받지 않고 시스템에서 요구하는 응답성을 일정하게 유지하는 것을 말한다.

    리액티브 시스템에서 "회복성"이란 시스템에 장애가 발생하더라도 응답성을 유지하는 것을 의미한다. 회복성을 확보하기 위해 리액티브 시스템의 구성요소들은 비동기 메시지 기반 통신을 통해 느슨한 결합과 격리성을 보장한다. 이를 다르게 표현하면, 시스템의 구성요소들이 독립적으로 분리되기 때문에 장애가 발생하더라도 전체 시스템은 여전히 응답 가능하고 장애가 발생한 부분만 복구하면 된다는 의미이다.

* VALUE ( 값 )

비동기 메시지 기반 통신을 바탕으로 한 회복성과 예측 가능한 규모 확장 알고리즘을 통해 시스템의 처리량을 자동으로 확장하고 축소하는 탄력성을 확보함으로써 즉각적으로 응답 가능한 시스템을 구축할 수 있음을 의미한다. 
> 이게 핵심 가치이다.!

리액티브 프로그래밍이란?
리액티브 시스템을 구축하는 데 필요한 프로그래밍 모델이다. 앞서 리액티브 시스템은 비동기 메시지 통신을 기반으로 한다고 했다. 이는 Blocking IO 방식이 아닌 Non-Blocking IO 방식의 통신이다. 

Blocking IO 방식의 통신에서는 해당 스레드가 작업을 처리할 때까지 남아 있는 작업들은 해당 작업이 끝날 때까지 차단되어 대기한다. 그렇기에 뒤에 남아 있는 작업들을 대기 없이 처리하려면 별도의 추가 스레드를 할당해야 해서 그만큼의 추가 비용이 발생한다.

리액티브 프로그래밍의 특징

> In computing, reactive programming is a declarative programming paradigm concerned with data streams and the propagation of change.

위키피디아의 정의에 기반하여 특징을 살펴보자.

* 선언형 프로그래밍

우리가 흔히 사용하는 프로그래밍 방식은 명령형 프로그래밍이다. 실행할 동작을 구체적으로 명시하는 방식이라고 볼 수 있는데, 선언형은 실행할 동작을 구체적으로 명시하지 않고 대강 이러한 동작을 하겠다는 목표만 선언한다. 

코드로 예시를 살펴보자.

```` bash java

public void sample() {
    List<Integer> numbers = Arrays.asList(1, 2, 6, 21, 10, 9, 11);
    int sum = 0;
    for(int number : numbers) {
        if(number > 6 && (number %2 !=0)) {
            sum += number;
        }
    }
    System.out.println(sum);
}

public void smaple2() {
    List<Integer> numbers = Arrays.asList(1, 2, 6, 21, 10, 9, 11);
    int sum = numbers.stream()
    .filter(number -> number > 6 &&(number %2 != 0))
    .mapToInt(number -> number)
    .sum();

    System.out.println(sum);
}

````
Stream API 사용으로 동작을 구체적으로 명시하지 않고 목표만 선언한다. 메소드를 chainning 형식으로 표현함으로써 입력으로 들어오는 데이터에 대해 어떤 식으로 처리할 지가 한 눈에 보여 코드가 간결해지고 가독성이 좋아진다.  


* 데이터 스트림과 변화의 전달(전파)

데이터 스트림은 데이터가 지속적으로 발생한다는 의미이고 변화의 전달은 지속적으로 데이터가 발생할 때마다 이것을 변화하는 이벤트로 보고, 이 이벤트를 발생시키면서 데이터를 계속적으로 전달하는 것을 의미한다.

리액티브 프로그래밍에서의 코드 구성

* Publisher

입력으로 들어오는 데이터를 제공하는 역할을 한다. 

* Subscriber

publisher로부터 전달받은 데이터를 사용하는 역할을 한다.

* Data Source

publisher의 입력으로 들어오는 데이터를 대표하는 용어로, Data stream 이라고도 표현한다. 

* Operator

publisher로부터 전달된 데이터가 순수하게 아무런 처리 없이 그대로 subscriber에 전달되는 경우는 거의 없다. 요구사항에 맞게 가공 처리가 이루어지는 데, 이것을 담당하는 것이 operator이다. 

[다음 페이지](./Chapter2.md)